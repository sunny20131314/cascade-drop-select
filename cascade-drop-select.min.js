!function(t){function e(t){this.options=t,this.num=t.num,e.prototype.optionTip=t.optionTip?"<option value=''>请选择</option>":"",e.prototype["default"]=t["default"],e.prototype.total=t.total,e.prototype.maxNum=t.maxNum,"none"==t.noData?e.prototype.css={cssAttr:"display",cssVal:"none"}:"hidden"==t.noData&&(e.prototype.css={cssAttr:"visibility",cssVal:"hidden"}),t.$el&&(this.$el=t.$el,this.selectArr=t.selectArr,this.changeId=0,this.inited=0,this._init())}e.prototype._init=function(){var t=this;t._html(t.selectArr,t.optionTip,t.$el),t.num==t.maxNum&&setTimeout(function(){t._done(),t.$el.parent().show()},1),t.optionTip||t._changeEvt({obj:t}),t.changeId||(t.changeId=1,t.$el.on("change",function(e){var n=this;t._changeEvt({obj:t,index:n.selectedIndex})}))},e.prototype._html=function(e,n,i){t.each(e,function(t,e){n+="<option value='"+e.name+"'>"+e.name+"</option>"}),i.attr("disabled",!1).html(n).css({display:"",visibility:""})},e.prototype._changeEvt=function(t){var e,n=t.obj,i=t.index>=0?t.index:0,o=t.init;o>=0&&n.$el.val(n.selectArr[o].name),n.css?n.$el.nextAll("select").empty().attr("disabled",!0).css(n.css.cssAttr,n.css.cssVal):n.$el.nextAll("select").empty().attr("disabled",!0),i=n.optionTip?i-1:i,e=o>=0?o:i&&-1==i?0:i;var a=n.total[n.num+1];a&&(a.selectArr=n.selectArr&&n.selectArr[e].child||"",a.selectArr&&a._init())},e.prototype._done=function(t){t&&t();var e=this;e.inited||(e.inited=1,e._defaultVal())},e.prototype._defaultVal=function(t){for(var e=this,n=0;n<=e.maxNum;n++)if(""!=e["default"][n]&&void 0!=e["default"][n]||(e["default"].length=0),e["default"].length){var i=e.total[n].selectArr&&e.total[n].selectArr.findIndexInArrObj(e["default"][n]);0==i||i||(e["default"].length=0),e["default"].length&&i>=0&&e._changeEvt({obj:e.total[n],init:i})}else!e.optionTip&&e._changeEvt({obj:e.total[n]})},Array.prototype.findIndexInArrObj=function(t,e){var n=this;if(t){e=e||"name";for(var i=0;i!=n.length;i++)if(t==n[i][e])return i>=0?i:""}},t.fn.cascadeDropSelect=function(n){var i=this;if(i.length){n=t.extend({data:[],selectLen:2,"default":[],noData:null,optionTip:!1},n);var o="",a=n.selectLen,l=i.find("select"),s=l.length;if(this.hide(),a>s){for(var r=s;r!=a;r++)o+="<select></select>";i.append(o)}else if(s>a)for(var c=a;c!=s;c++)l.eq(c-1).remove();var p=[];return i.find("select").each(function(i,o){p[i]=new e({$el:t(o),selectArr:i?"":n.data,optionTip:n.optionTip,"default":n["default"]||[],noData:n.noData,maxNum:a-1,total:p,num:i})}),p}}}(jQuery);